---
import PostCard from "../components/PostCard.astro"
import PostPage from "../components/PostPage.astro"
import Pagination from "../components/control/Pagination.astro"
import { PAGE_SIZE } from "../constants/constants"
import MainGridLayout from "../layouts/MainGridLayout.astro"
import { getSortedPosts } from "../utils/content-utils"
import { getPostUrlBySlug } from "../utils/url-utils"

export async function getStaticPaths({ paginate }: any) {
  const allBlogPosts = await getSortedPosts()
  return paginate(allBlogPosts, { pageSize: PAGE_SIZE })
}

interface Props {
  page: any
}

const { page } = Astro.props

const len = page.data.length
---

<MainGridLayout showFooter={false}>
  <PostPage page={page} />
  <Pagination
    class="mx-auto onload-animation"
    page={page}
    style=`animation-delay: calc(var(--content-delay) + ${(len)*50}ms)`
  />
</MainGridLayout>
